<infinity-table class="payments-list"
                load-items-promise="payments.getPayments"
                page-size="24"
                item-alias="item"
                filters-obj="payments.filter"
                sort-obj="payments.sortExpr"
                cache-filters-key="payments.cacheFiltersKey"
                default-sort-field="'CreatedOn'"
                default-sort-value="'false'">
    <infinity-table-sort>
        <div class="min-width-280px">
            <md-icon md-svg-src="assets/images/default/user-square.svg"
                     class="main-sort-icon user-icon"></md-icon>
            <inftbl-sort-list param-name="Source">Payer:</inftbl-sort-list>
        </div>
        <div class="w130px">
            <md-icon md-svg-src="assets/images/default/billing.svg"
                     class="main-sort-icon billing-icon"></md-icon>
            <inftbl-sort-list param-name="PaymentAmount">Payment:</inftbl-sort-list>
        </div>
        <div class="w160px">
            <md-icon md-svg-src="assets/images/default/billing.svg"
                     class="main-sort-icon billing-icon"></md-icon>
            <inftbl-sort-list param-name="Adjustment">Adjustments:</inftbl-sort-list>
        </div>
        <div class="w130px">
            <md-icon md-svg-src="assets/images/default/billing.svg"
                     class="main-sort-icon billing-icon"></md-icon>
            <inftbl-sort-list param-name="Total">Total:</inftbl-sort-list>
        </div>
        <div class="w130px">
            <md-icon md-svg-src="assets/images/default/billing.svg"
                     class="main-sort-icon billing-icon"></md-icon>
            <inftbl-sort-list param-name="Unapplied">Unapplied:</inftbl-sort-list>
        </div>
        <div class="w170px">
            <md-icon md-svg-src="assets/images/default/calendar-new.svg"
                     class="main-sort-icon date-icon"></md-icon>
            <inftbl-sort-list param-name="Date">Remittance Date:</inftbl-sort-list>
        </div>
        <div class="w150px">
            <md-icon md-svg-src="assets/images/default/calendar-new.svg"
                     class="main-sort-icon date-icon"></md-icon>
            <inftbl-sort-list param-name="CreatedOn">Created date:</inftbl-sort-list>
        </div>
        <div class="w150px">
            <md-icon md-svg-src="assets/images/default/calendar-new.svg"
                     class="main-sort-icon date-icon"></md-icon>
            Method:
        </div>
        <div class="w140px">
            <md-icon md-svg-src="assets/images/default/documents.svg"
                     class="main-sort-icon document-icon"></md-icon>
            Reference #:
        </div>
        <div class="w100px">
            <md-icon md-svg-src="assets/images/default/documents.svg"
                     class="main-sort-icon document-icon"></md-icon>
            <inftbl-sort-list param-name="Notes">Note:</inftbl-sort-list>
        </div>
        <div class="w120px">
            <md-icon md-svg-src="assets/images/default/star-half.svg"
                     class="main-sort-icon location-icon"></md-icon>
            Status:
        </div>
        <div class="assign-td">&nbsp;</div>
    </infinity-table-sort>

    <infinity-table-filters class="drowz-infinite-row-filter">
        <div class="min-width-280px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search name</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.Source"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="w130px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.PaymentAmount"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="w160px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.AdjustmentAmount"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="w130px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.Total"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="w130px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.Unapplied"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="w170px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search date</label>
                <input ng-model="$ctrl.filtersObj.Date"
                       datetimepicker
                       use-current="false"
                       format="MM/DD/YYYY"
                       show-today-button="false"
                       aria-label="..."
                       clear-on-click>
            </md-input-container>
        </div>
        <div class="w150px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search date</label>
                <input ng-model="$ctrl.filtersObj.CreatedOn"
                       datetimepicker
                       use-current="false"
                       format="MM/DD/YYYY"
                       show-today-button="false"
                       aria-label="..."
                       clear-on-click>
            </md-input-container>
        </div>
        <div class="w150px">
            <md-input-container class="drowz-infinite-input-container">
                <label>select</label>
                <md-select ng-model="$ctrl.filtersObj.Method"
                           clear-on-click>
                    <md-option ng-value="method.Id"
                               ng-repeat="method in $parent.payments.methodsDictionary track by $index">
                        {{method.Name}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="w140px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.Reference"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="w100px">
            <md-input-container class="drowz-infinite-input-container">
                <label>search</label>
                <input type="text"
                       ng-model="$ctrl.filtersObj.Notes"
                       ng-model-options="{debounce: 450}"
                       clear-on-click />
            </md-input-container>
        </div>
        <div class="no-divider w120px">
            <md-input-container class="drowz-infinite-input-container">
                <label>select</label>
                <md-select ng-model="$ctrl.filtersObj.Status"
                           clear-on-click>
                    <md-option ng-value="status.Id" ng-repeat="status in $parent.payments.statuses">
                        {{status.Name}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
        <div class="assign-td filter-reset-btn">
            <inftbl-filter-reset-btn></inftbl-filter-reset-btn>
        </div>
    </infinity-table-filters>

    <infinity-table-row class="drowz-infinite-row hide-btns-row"
                        ng-click="$parent.payments.paymentDetails(item.Id)">
        <div class="min-width-280px">
            <div ng-if="item.Source.SourceType.Id === $parent.payments.paymentTypeConstants.PATIENT_TYPE_ID">
                <span ng-bind="item.Source.Patient.Name | fullname"></span><br/>
                (<span ng-bind='item.Source.Patient.DateOfBirth | amUtc | amDateFormat: "MM/DD/YYYY"'></span>)
            </div>
            <div ng-if="item.Source.SourceType.Id === $parent.payments.paymentTypeConstants.PAYER_TYPE_ID"
                 ng-bind="item.Source.Insurance.Name"
            ></div>
        </div>
        <div class="w130px font-semibold"
             ng-bind="(item.PaymentAmount.Currency) + ' ' + (item.PaymentAmount.Amount | absNumber:2 )"></div>
        <div class="w160px font-semibold"
             ng-bind="(item.Adjustment.Currency) + ' ' + (item.Adjustment.Amount | absNumber:2 )"></div>
        <div class="w130px font-semibold"
             ng-bind="(item.Total.Currency) + ' ' + (item.Total.Amount | absNumber:2 )"></div>
        <div class="w130px font-semibold"
             ng-bind="(item.Unapplied.Currency) + ' ' + (item.Unapplied.Amount | absNumber:2 )"></div>
        <div class="w170px">
            <span ng-bind='item.Date | amUtc | amDateFormat: "MM/DD/YYYY"'></span>
        </div>
        <div class="w150px">
            <span ng-bind='item.CreatedOn | amUtc | amDateFormat: "MM/DD/YYYY"'></span>
        </div>
        <div class="w150px" ng-bind="item.Method.Name"></div>
        <div class="w140px"
             ng-bind="item.Reference"></div>
        <div class="w100px notes-td">
            <md-icon md-svg-src="assets/images/default/list.svg"
                     ng-if="item.Notes"
                     simple-tooltip="{{item.Notes}}"
                     tooltip-position="left"></md-icon>
            <span ng-if="!item.Notes">-</span>
        </div>
        <div class="w120px no-divider">
            <div class="status-label {{ item.StatusClass }}"
                 ng-bind="item.Status.Name"></div>
        </div>
        <div class="assign-td center-cell">
            <md-button class="delete-icon-btn"
                       aria-label="..."
                       confirm-ng-click="$parent.payments.deletePayment(item)"
                       confirm-title="Delete Payment"
                       confirm-msg="'Are you sure you want to delete this payment?'">
                <md-icon md-svg-src="assets/images/default/trash.svg"></md-icon>
            </md-button>
        </div>
    </infinity-table-row>

    <infinity-table-no-items>
        <no-records text="Payments" is-fullpage="true"></no-records>
    </infinity-table-no-items>
</infinity-table>
